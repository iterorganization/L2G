# L2G

## Introduction

L2G modules is a suit for running FLT (FieldLine Tracing). It is a library
that gives functionality to prepare FLT cases, run it and post-process it. For
it's kernel it uses the L2G_cpp C++ library, wrapped with Cython. L2G_cpp is a
C++ library that follows magnetic fieldlines in a tokamak. The library solves
the FL equation in a cylindrical coordinate system and for FLT it uses the
Embree3 RT kernel to test if FL intersect any loaded shadowing geometry. It is
equipped with other commonly used functions and classes for inspecting
equilibrium data.

## Installation

To build the module run the following command in a linux system:

```shell
EMBREE_ROOT_DIR=/path/to/embree L2G_CPP_ROOT_DIR=/path/to/L2G_cpp EMBREE_VERSION=3 \
python -m pip install . --no-deps
```
or if the Embree3 and L2G_CPP are EasyBuild modules simply load the modules and
call

```shell
python -m pip install . --no-deps
```

The development packages of the C++ kernel and Embree are required for
successful compilation. The C++ kernel is compatible with Embree4, you must 
simply define EMBREE_VERION=4. If the EMBREE_VERSION is created by an 
environment software and is in fact a semver, the setup.py will only take the
leading digit, as only the major version value is required.

## Third party C++ Dependencies

Third party C++ (non python) dependencies are:

 - L2G_cpp C++ kernel (https://git.iter.org/projects/TRAJ/repos/yaflt)
 - Embree (https://github.com/RenderKit/embree)

Every other dependency is run-time dependency and not required for building the
package (and it's Cython extension).

# Building documentation

Sphinx is used for building the documentation. Too see which Sphinx extensions
are used check the conf.py file. Otherwise in the doc directory simply run the
make command for either the html or latexpdf format.